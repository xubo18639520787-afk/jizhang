# Androidåº”ç”¨ç­¾åé…ç½®æŒ‡å—

## ğŸ“‹ æ¦‚è¿°

ä¸ºäº†å‘å¸ƒæ­£å¼ç‰ˆæœ¬çš„Androidåº”ç”¨ï¼Œéœ€è¦é…ç½®åº”ç”¨ç­¾åã€‚æœ¬æŒ‡å—å°†å¸®åŠ©æ‚¨å®Œæˆç­¾åé…ç½®ã€‚

## ğŸ”‘ ç”Ÿæˆç­¾åå¯†é’¥

### 1. ä½¿ç”¨Android Studioç”Ÿæˆ
1. æ‰“å¼€Android Studio
2. èœå•æ é€‰æ‹© **Build** â†’ **Generate Signed Bundle / APK**
3. é€‰æ‹© **APK** æˆ– **Android App Bundle**
4. ç‚¹å‡» **Create new...** åˆ›å»ºæ–°çš„å¯†é’¥åº“
5. å¡«å†™å¯†é’¥åº“ä¿¡æ¯ï¼š
   - **Key store path**: é€‰æ‹©ä¿å­˜ä½ç½®ï¼ˆå»ºè®®ä¿å­˜åœ¨é¡¹ç›®å¤–éƒ¨å®‰å…¨ä½ç½®ï¼‰
   - **Password**: è®¾ç½®å¯†é’¥åº“å¯†ç 
   - **Key alias**: è®¾ç½®å¯†é’¥åˆ«åï¼ˆå¦‚ï¼špersonalaccountingï¼‰
   - **Key password**: è®¾ç½®å¯†é’¥å¯†ç 
   - **Validity**: è®¾ç½®æœ‰æ•ˆæœŸï¼ˆå»ºè®®25å¹´ä»¥ä¸Šï¼‰
   - **Certificate**: å¡«å†™è¯ä¹¦ä¿¡æ¯

### 2. ä½¿ç”¨å‘½ä»¤è¡Œç”Ÿæˆ
```bash
keytool -genkey -v -keystore release.keystore -alias personalaccounting -keyalg RSA -keysize 2048 -validity 10000
```

## âš™ï¸ é…ç½®ç­¾å

### 1. åˆ›å»ºkeystore.propertiesæ–‡ä»¶
åœ¨appç›®å½•ä¸‹åˆ›å»º `keystore.properties` æ–‡ä»¶ï¼š

```properties
storeFile=../keystore/release.keystore
storePassword=ä½ çš„å¯†é’¥åº“å¯†ç 
keyAlias=ä½ çš„å¯†é’¥åˆ«å
keyPassword=ä½ çš„å¯†é’¥å¯†ç 
```

### 2. æ›´æ–°build.gradle.kts
åœ¨app/build.gradle.ktsä¸­æ·»åŠ ç­¾åé…ç½®ï¼š

```kotlin
android {
    signingConfigs {
        create("release") {
            val keystorePropertiesFile = rootProject.file("keystore.properties")
            if (keystorePropertiesFile.exists()) {
                val keystoreProperties = Properties()
                keystoreProperties.load(FileInputStream(keystorePropertiesFile))
                
                keyAlias = keystoreProperties["keyAlias"] as String
                keyPassword = keystoreProperties["keyPassword"] as String
                storeFile = file(keystoreProperties["storeFile"] as String)
                storePassword = keystoreProperties["storePassword"] as String
            }
        }
    }
    
    buildTypes {
        release {
            isMinifyEnabled = true
            proguardFiles(
                getDefaultProguardFile("proguard-android-optimize.txt"),
                "proguard-rules.pro"
            )
            signingConfig = signingConfigs.getByName("release")
        }
    }
}
```

## ğŸ”’ å®‰å…¨æ³¨æ„äº‹é¡¹

1. **å¯†é’¥åº“å®‰å…¨**ï¼š
   - å°†å¯†é’¥åº“æ–‡ä»¶ä¿å­˜åœ¨å®‰å…¨ä½ç½®
   - ä¸è¦å°†å¯†é’¥åº“æ–‡ä»¶æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ
   - å®šæœŸå¤‡ä»½å¯†é’¥åº“æ–‡ä»¶

2. **å¯†ç å®‰å…¨**ï¼š
   - ä½¿ç”¨å¼ºå¯†ç 
   - ä¸è¦åœ¨ä»£ç ä¸­ç¡¬ç¼–ç å¯†ç 
   - å°†keystore.propertiesæ·»åŠ åˆ°.gitignore

3. **ç‰ˆæœ¬æ§åˆ¶**ï¼š
   ```gitignore
   # ç­¾åæ–‡ä»¶
   keystore.properties
   *.keystore
   *.jks
   ```

## ğŸš€ æ„å»ºç­¾åAPK

### ä½¿ç”¨Gradleå‘½ä»¤
```bash
# æ„å»ºReleaseç‰ˆæœ¬
./gradlew assembleRelease

# æ„å»ºå¹¶å®‰è£…Releaseç‰ˆæœ¬
./gradlew installRelease
```

### ä½¿ç”¨GitHub Actions
GitHub Actionså·¥ä½œæµå·²é…ç½®è‡ªåŠ¨ç­¾åæ„å»ºï¼Œåªéœ€ï¼š
1. å°†ç­¾åé…ç½®æ·»åŠ åˆ°GitHub Secrets
2. æ¨é€ä»£ç è§¦å‘è‡ªåŠ¨æ„å»º
3. ä¸‹è½½æ„å»ºå¥½çš„ç­¾åAPK

## ğŸ“± éªŒè¯ç­¾å

ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤éªŒè¯APKç­¾åï¼š
```bash
# æŸ¥çœ‹APKç­¾åä¿¡æ¯
keytool -printcert -jarfile app-release.apk

# éªŒè¯APKç­¾å
jarsigner -verify -verbose -certs app-release.apk
```

## ğŸ”§ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜ï¼š
1. **å¯†é’¥åº“æ–‡ä»¶è·¯å¾„é”™è¯¯**ï¼šæ£€æŸ¥keystore.propertiesä¸­çš„è·¯å¾„
2. **å¯†ç é”™è¯¯**ï¼šç¡®è®¤å¯†é’¥åº“å¯†ç å’Œå¯†é’¥å¯†ç æ­£ç¡®
3. **æƒé™é—®é¢˜**ï¼šç¡®ä¿æœ‰è¯»å–å¯†é’¥åº“æ–‡ä»¶çš„æƒé™

### è§£å†³æ–¹æ¡ˆï¼š
- æ£€æŸ¥æ–‡ä»¶è·¯å¾„æ˜¯å¦æ­£ç¡®
- éªŒè¯å¯†ç æ˜¯å¦æ­£ç¡®
- ç¡®ä¿å¯†é’¥åº“æ–‡ä»¶å­˜åœ¨ä¸”å¯è¯»